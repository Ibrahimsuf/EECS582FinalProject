{"ast":null,"code":"import { readJSON, writeJSON } from \"./storage\";\nconst USERS_KEY = \"teamhub_users\";\nconst SESSION_KEY = \"teamhub_session\";\nexport function getUsers() {\n  return readJSON(USERS_KEY, []);\n}\nexport function registerUser({\n  name,\n  email,\n  password\n}) {\n  const users = getUsers();\n  const exists = users.some(u => u.email.toLowerCase() === email.toLowerCase());\n  if (exists) {\n    throw new Error(\"A user with this email already exists.\");\n  }\n  const newUser = {\n    id: crypto.randomUUID ? crypto.randomUUID() : String(Date.now()),\n    name,\n    email,\n    password\n  };\n  users.push(newUser);\n  writeJSON(USERS_KEY, users);\n  return newUser;\n}\nexport function loginUser({\n  email,\n  password\n}) {\n  const users = getUsers();\n  const user = users.find(u => u.email.toLowerCase() === email.toLowerCase() && u.password === password);\n  if (!user) throw new Error(\"Invalid email or password.\");\n  writeJSON(SESSION_KEY, {\n    userId: user.id\n  });\n  return user;\n}\nexport function logout() {\n  localStorage.removeItem(SESSION_KEY);\n}\nexport function getCurrentUser() {\n  const session = readJSON(SESSION_KEY, null);\n  if (!(session !== null && session !== void 0 && session.userId)) return null;\n  const users = getUsers();\n  return users.find(u => u.id === session.userId) || null;\n}\nexport function isAuthed() {\n  return !!getCurrentUser();\n}","map":{"version":3,"names":["readJSON","writeJSON","USERS_KEY","SESSION_KEY","getUsers","registerUser","name","email","password","users","exists","some","u","toLowerCase","Error","newUser","id","crypto","randomUUID","String","Date","now","push","loginUser","user","find","userId","logout","localStorage","removeItem","getCurrentUser","session","isAuthed"],"sources":["/workspaces/EECS582FinalProject/teamhub-frontend/src/lib/auth.js"],"sourcesContent":["import { readJSON, writeJSON } from \"./storage\";\n\nconst USERS_KEY = \"teamhub_users\";\nconst SESSION_KEY = \"teamhub_session\";\n\nexport function getUsers() {\n  return readJSON(USERS_KEY, []);\n}\n\nexport function registerUser({ name, email, password }) {\n  const users = getUsers();\n  const exists = users.some((u) => u.email.toLowerCase() === email.toLowerCase());\n  if (exists) {\n    throw new Error(\"A user with this email already exists.\");\n  }\n  const newUser = {\n    id: crypto.randomUUID ? crypto.randomUUID() : String(Date.now()),\n    name,\n    email,\n    password\n  };\n  users.push(newUser);\n  writeJSON(USERS_KEY, users);\n  return newUser;\n}\n\nexport function loginUser({ email, password }) {\n  const users = getUsers();\n  const user = users.find(\n    (u) => u.email.toLowerCase() === email.toLowerCase() && u.password === password\n  );\n  if (!user) throw new Error(\"Invalid email or password.\");\n  writeJSON(SESSION_KEY, { userId: user.id });\n  return user;\n}\n\nexport function logout() {\n  localStorage.removeItem(SESSION_KEY);\n}\n\nexport function getCurrentUser() {\n  const session = readJSON(SESSION_KEY, null);\n  if (!session?.userId) return null;\n  const users = getUsers();\n  return users.find((u) => u.id === session.userId) || null;\n}\n\nexport function isAuthed() {\n  return !!getCurrentUser();\n}\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,WAAW;AAE/C,MAAMC,SAAS,GAAG,eAAe;AACjC,MAAMC,WAAW,GAAG,iBAAiB;AAErC,OAAO,SAASC,QAAQA,CAAA,EAAG;EACzB,OAAOJ,QAAQ,CAACE,SAAS,EAAE,EAAE,CAAC;AAChC;AAEA,OAAO,SAASG,YAAYA,CAAC;EAAEC,IAAI;EAAEC,KAAK;EAAEC;AAAS,CAAC,EAAE;EACtD,MAAMC,KAAK,GAAGL,QAAQ,CAAC,CAAC;EACxB,MAAMM,MAAM,GAAGD,KAAK,CAACE,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACL,KAAK,CAACM,WAAW,CAAC,CAAC,KAAKN,KAAK,CAACM,WAAW,CAAC,CAAC,CAAC;EAC/E,IAAIH,MAAM,EAAE;IACV,MAAM,IAAII,KAAK,CAAC,wCAAwC,CAAC;EAC3D;EACA,MAAMC,OAAO,GAAG;IACdC,EAAE,EAAEC,MAAM,CAACC,UAAU,GAAGD,MAAM,CAACC,UAAU,CAAC,CAAC,GAAGC,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;IAChEf,IAAI;IACJC,KAAK;IACLC;EACF,CAAC;EACDC,KAAK,CAACa,IAAI,CAACP,OAAO,CAAC;EACnBd,SAAS,CAACC,SAAS,EAAEO,KAAK,CAAC;EAC3B,OAAOM,OAAO;AAChB;AAEA,OAAO,SAASQ,SAASA,CAAC;EAAEhB,KAAK;EAAEC;AAAS,CAAC,EAAE;EAC7C,MAAMC,KAAK,GAAGL,QAAQ,CAAC,CAAC;EACxB,MAAMoB,IAAI,GAAGf,KAAK,CAACgB,IAAI,CACpBb,CAAC,IAAKA,CAAC,CAACL,KAAK,CAACM,WAAW,CAAC,CAAC,KAAKN,KAAK,CAACM,WAAW,CAAC,CAAC,IAAID,CAAC,CAACJ,QAAQ,KAAKA,QACzE,CAAC;EACD,IAAI,CAACgB,IAAI,EAAE,MAAM,IAAIV,KAAK,CAAC,4BAA4B,CAAC;EACxDb,SAAS,CAACE,WAAW,EAAE;IAAEuB,MAAM,EAAEF,IAAI,CAACR;EAAG,CAAC,CAAC;EAC3C,OAAOQ,IAAI;AACb;AAEA,OAAO,SAASG,MAAMA,CAAA,EAAG;EACvBC,YAAY,CAACC,UAAU,CAAC1B,WAAW,CAAC;AACtC;AAEA,OAAO,SAAS2B,cAAcA,CAAA,EAAG;EAC/B,MAAMC,OAAO,GAAG/B,QAAQ,CAACG,WAAW,EAAE,IAAI,CAAC;EAC3C,IAAI,EAAC4B,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEL,MAAM,GAAE,OAAO,IAAI;EACjC,MAAMjB,KAAK,GAAGL,QAAQ,CAAC,CAAC;EACxB,OAAOK,KAAK,CAACgB,IAAI,CAAEb,CAAC,IAAKA,CAAC,CAACI,EAAE,KAAKe,OAAO,CAACL,MAAM,CAAC,IAAI,IAAI;AAC3D;AAEA,OAAO,SAASM,QAAQA,CAAA,EAAG;EACzB,OAAO,CAAC,CAACF,cAAc,CAAC,CAAC;AAC3B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}